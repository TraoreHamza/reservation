{# 
    COMPOSANT DE NAVIGATION GLOBAL
    ==============================
    
    CARACT√âRISTIQUES :
    - Navigation responsive
    - Menu d'administration conditionnel (ROLE_ADMIN uniquement)
    - Liens vers les principales fonctionnalit√©s
    - Design moderne avec Tailwind CSS
#}

<nav class="bg-white shadow-lg border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <!-- Logo et navigation principale -->
            <div class="flex items-center">
                <a href="{{ path('home') }}" class="flex-shrink-0 flex items-center">
                    <span class="text-2xl mr-2">üè®</span>
                    <span class="text-xl font-bold text-gray-800">SalleVenue</span>
                </a>
                
                <div class="hidden md:ml-6 md:flex md:space-x-8">
                    <a href="{{ path('rooms') }}" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">
                        Chambres
                    </a>
                    <a href="{{ path('search_room') }}" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">
                        Recherche
                    </a>
                    {% if app.user %}
                        <a href="{{ path('bookings') }}" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">
                            Mes R√©servations
                        </a>
                    {% endif %}
                </div>
            </div>

            <!-- Menu utilisateur et administration -->
            <div class="flex items-center space-x-4">
                <!-- Menu d'administration (ROLE_ADMIN uniquement) -->
                {% if is_granted('ROLE_ADMIN') %}
                <div class="relative">
                    <button id="adminMenuButton" class="bg-orange-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-orange-700 transition-colors flex items-center">
                        <span class="mr-2">‚öôÔ∏è</span>
                        Administration
                        <span class="ml-2">‚ñº</span>
                    </button>
                    
                    <div id="adminDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 hidden">
                        <a href="{{ path('admin') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            üè† Dashboard
                        </a>
                        <a href="{{ path('admin_room_index') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            üè† Gestion des salles
                        </a>
                        <a href="{{ path('admin_booking_index') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            üìÖ Gestion des r√©servations
                        </a>
                        <a href="{{ path('admin_client_index') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            üë• Gestion des clients
                        </a>
                        <a href="{{ path('admin_equipment_index') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            ‚öôÔ∏è Gestion des √©quipements
                        </a>
                    </div>
                </div>
                {% endif %}

                <!-- Menu utilisateur -->
                <div class="relative">
                    {% if app.user %}
                        <button id="userMenuButton" class="bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors flex items-center">
                            <span class="mr-2">üë§</span>
                            {{ app.user.email }}
                            <span class="ml-2">‚ñº</span>
                        </button>
                        
                        <div id="userDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 hidden">
                            <a href="{{ path('user_profile') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                üë§ Mon Profil
                            </a>
                            <a href="{{ path('user_fiche') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                üìã Ma Fiche Client
                            </a>
                            <div class="border-t border-gray-100"></div>
                            <a href="{{ path('app_logout') }}" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">
                                üö™ D√©connexion
                            </a>
                        </div>
                    {% else %}
                        <div class="flex space-x-2">
                            <a href="{{ path('app_login') }}" class="bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700 transition-colors">
                                Connexion
                            </a>
                            <a href="{{ path('app_register') }}" class="bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700 transition-colors">
                                Inscription
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Gestion du menu d'administration
    const adminMenuButton = document.getElementById('adminMenuButton');
    const adminDropdown = document.getElementById('adminDropdown');
    
    if (adminMenuButton && adminDropdown) {
        adminMenuButton.addEventListener('click', function(e) {
            e.stopPropagation();
            adminDropdown.classList.toggle('hidden');
        });
    }
    
    // Gestion du menu utilisateur
    const userMenuButton = document.getElementById('userMenuButton');
    const userDropdown = document.getElementById('userDropdown');
    
    if (userMenuButton && userDropdown) {
        userMenuButton.addEventListener('click', function(e) {
            e.stopPropagation();
            userDropdown.classList.toggle('hidden');
        });
    }
    
    // Fermer les menus en cliquant ailleurs
    document.addEventListener('click', function() {
        if (adminDropdown) adminDropdown.classList.add('hidden');
        if (userDropdown) userDropdown.classList.add('hidden');
    });
});
</script>
