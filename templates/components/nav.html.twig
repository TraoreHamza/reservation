<nav class="bg-white shadow-lg border-b">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="flex justify-between h-16">
			<!-- Logo et navigation principale -->
			<div class="flex">
				<div class="flex-shrink-0 flex items-center">
					<a href="{{ path('home') }}" class="flex items-center space-x-2">
						<twig:ux:icon name="fluent-mdl2:room" class="h-8 w-8 text-blue-600"/>
						<span class="text-xl font-bold text-gray-900">SalleVenue</span>
					</a>
				</div>
				
				<!-- Navigation desktop -->
				<div class="hidden sm:ml-6 sm:flex sm:space-x-8">
					<a href="{{ path('home') }}" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
						Accueil
					</a>
					<a href="{{ path('rooms') }}" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
						Les salles
					</a>
					<a href="{{ path('search_room') }}" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
						Rechercher
					</a>
					{% if app.user and not is_granted('ROLE_ADMIN') %}
						<a href="{{ path('booking_new') }}" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
							Réservation
						</a>
						<a href="{{ path('bookings') }}" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
							Mes réservations
						</a>
					{% endif %}
					{% if is_granted('ROLE_ADMIN') %}
						<a href="{{ path('admin') }}" class="border-blue-500 text-blue-600 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
							Administration
						</a>
					{% endif %}
				</div>
			</div>

			<!-- Barre de recherche et menu utilisateur -->
			<div class="flex items-center space-x-4">
				<!-- Menu utilisateur -->
				<div class="relative">
					{% if app.user %}
						<div class="flex items-center space-x-3">
							<!-- Notifications -->
							<button class="p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md">
								<twig:ux:icon name="lucide:bell" class="h-6 w-6"/>
							</button>
							
							<!-- Menu dropdown -->
							<div class="relative" x-data="{ open: false }" id="user-menu">
								<button @click="open = !open" class="flex items-center space-x-2 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500">
									<div class="h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center">
										<span class="text-white text-sm font-medium">{{ app.user.email|first|upper }}</span>
									</div>
									<twig:ux:icon name="lucide:chevron-down" class="h-4 w-4 text-gray-400"/>
								</button>
								
								<div x-show="open" @click.away="open = false" 
									 class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
									<div class="px-4 py-2 text-xs text-gray-500 border-b">
										{{ app.user.email }}
									</div>
									
									<a href="{{ path('user_profile') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
										<twig:ux:icon name="lucide:user" class="h-4 w-4 inline mr-2"/>
										Mon profil
									</a>
									
									{% if not is_granted('ROLE_ADMIN') %}
										<a href="{{ path('user_favorites') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
											<twig:ux:icon name="line-md:heart" class="h-4 w-4 inline mr-2"/>
											Mes favoris
										</a>
										<a href="{{ path('bookings') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
											<twig:ux:icon name="lucide:calendar" class="h-4 w-4 inline mr-2"/>
											Mes réservations
										</a>
									{% endif %}
									
									{% if is_granted('ROLE_ADMIN') %}
										<a href="{{ path('admin') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
											<twig:ux:icon name="lucide:shield" class="h-4 w-4 inline mr-2"/>
											Administration
										</a>
										<a href="{{ path('documentation') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
											<twig:ux:icon name="lucide:file-text" class="h-4 w-4 inline mr-2"/>
											Documentation
										</a>
									{% endif %}
									
									<div class="border-t border-gray-100"></div>
									<a href="{{ path('app_logout') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
										<twig:ux:icon name="lucide:log-out" class="h-4 w-4 inline mr-2"/>
										Déconnexion
									</a>
								</div>
							</div>
						</div>
					{% else %}
						<div class="flex items-center space-x-4">
							<a href="{{ path('app_login') }}" class="text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium">
								Connexion
							</a>
							<a href="{{ path('app_register') }}" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
								Inscription
							</a>
						</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>

	<!-- Menu mobile -->
	<div class="sm:hidden">
		<div class="pt-2 pb-3 space-y-1">
			<a href="{{ path('home') }}" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300">
				Accueil
			</a>
			<a href="{{ path('rooms') }}" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300">
				Les salles
			</a>
			<a href="{{ path('search_room') }}" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300">
				Rechercher
			</a>
			{% if app.user and not is_granted('ROLE_ADMIN') %}
				<a href="{{ path('booking_new') }}" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300">
					Réservation
				</a>
				<a href="{{ path('bookings') }}" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300">
					Mes réservations
				</a>
			{% endif %}
			{% if is_granted('ROLE_ADMIN') %}
				<a href="{{ path('admin') }}" class="block pl-3 pr-4 py-2 border-l-4 border-blue-500 text-base font-medium text-blue-700 bg-blue-50">
					Administration
				</a>
			{% endif %}
		</div>
	</div>
</nav>

{# {{ path('user_favorite_toggle', {'roomId': room.id}) }} #}
